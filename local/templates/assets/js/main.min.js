"use strict";function favourites(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=$(e).data("id"),a=$(e).attr("data-a");$.ajax({url:"/ajax/favourites.php",data:{action:a,id:i},method:"get",dataType:"json",success:function(i){i.result&&("add"==a?($(e).addClass("active"),$(e).attr("data-a","del")):($(e).removeClass("active"),$(e).attr("data-a","add")),$(".heart .header-count").html(i.count),0==i.count?$(".heart .header-count").addClass("hide-block"):$(".heart .header-count").removeClass("hide-block"),t&&window.location.reload(!1))}})}function toggleCart(){$(".cart-modal").toggleClass("active")}!function(e){e(function(){$("#menu-btn").on("click",function(){$(this).toggleClass("active"),$("#menu").slideToggle()}),$(".search__icon").on("click",function(){$(".search-field").addClass("active"),$(this).addClass("active"),$("#cart-count,.header__phone").css("display","none"),$("#menu").addClass("d-none")}),$(".search__close").on("click",function(){$(".search-field").removeClass("active"),$(this).removeClass("active"),$("#cart-count,.header__phone").css("display","flex"),$("#menu").removeClass("d-none")}),$("#main-slider").slick({nextArrow:"",prevArrow:""}),$("#show_more").on("click",function(){$(".category-items").css("display","flex")}),$("#signup-form").ajaxForm({url:"/ajax/signup.php",type:"post",success:function(e){var t=JSON.parse(e);if($('#signup-form input[name="email"]').siblings("label").html("E-mail *"),$('#signup-form input[name="password"]').siblings("label").html("Пароль *"),$('#signup-form input[name="repeat_password"]').siblings("label").html("Повторите пароль *"),$("#signup-form .item").removeClass("error"),!t.result&&t.errors){var i=$('#signup-form input[name="email"]').siblings("label");t.errors.email?($('#signup-form input[name="email"]').parent().addClass("error"),i.html(t.errors.email[0])):i.html("E-mail *"),i=$('#signup-form input[name="password"]').siblings("label"),t.errors.password?($('#signup-form input[name="password"]').parent().addClass("error"),i.html(t.errors.password[0])):i.html("Пароль *"),i=$('#signup-form input[name="repeat_password"]').siblings("label"),t.errors.repeat_password?($('#signup-form input[name="repeat_password"]').parent().addClass("error"),i.html(t.errors.repeat_password[0])):i.html("Повторите пароль *")}else if(t.cerror){var a=$('#signup-form input[name="email"]').siblings("label");$('#signup-form input[name="email"]').parent().addClass("error"),a.html(t.cerror)}else window.location.reload(!1)}}),$("#login-form").ajaxForm({url:"/ajax/login.php",type:"post",success:function(e){var t=JSON.parse(e);if($('#login-form input[name="email"]').siblings("label").html("E-mail *"),$('#login-form input[name="password"]').siblings("label").html("Пароль *"),$("#login-form .item").removeClass("error"),t.result)window.location.reload(!1);else if(t.errors){var i=$('#login-form input[name="email"]').siblings("label");t.errors.email?($('#login-form input[name="email"]').parent().addClass("error"),i.html(t.errors.email[0])):i.html("E-mail *"),i=$('#login-form input[name="password"]').siblings("label"),t.errors.password?($('#login-form input[name="password"]').parent().addClass("error"),i.html(t.errors.password[0])):i.html("Пароль *")}else t.cerror&&($('#login-form input[name="email"]').parent().addClass("error"),$('#login-form input[name="email"]').siblings("label").html(t.cerror))}}),$("#signup .modal-close").on("click",function(){$("#signup").parent().toggle()}),$(".user").attr("href")||$(".user").on("click",function(){$("#signup").parent().toggle()}),$("#login .modal-close").on("click",function(){$("#login").parent().toggle()}),$("#login .remember").on("change",function(){$("#login .bx-filter-param-label").toggleClass("active")}),$("#login .btn, #signup .btn").on("click",function(){$("#login").parent().toggle(),$("#signup").parent().toggle()}),$('input[type="tel"]').inputmask("+9 999 999-99-99"),$("#ava").on("click",function(){$("#ava-input").click()}),$("#ava-input").on("change",function(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){var t=e.target.result;$("#ava").css("background-image","url("+t+")")},e.readAsDataURL($("#ava-input")[0].files[0])}}),$(".order-detailed").on("click",function(){$(this).parent().hasClass("active")||($(".order .active .btn").html("Подробнее"),$(".order .active").parent().find(".order-content").slideToggle(),$(".order .active").toggleClass("active"));var e=$(this).parent().parent();e.find(".order-content").slideToggle(),e.find(".order-head").toggleClass("active"),"Свернуть"==e.find(".btn").html()?e.find(".btn").html("Подробнее"):e.find(".btn").html("Свернуть")})})}(jQuery);